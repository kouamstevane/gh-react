name: Build and Deploy # Nom du workflow GitHub Actions
on: [workflow_dispatch] # D√©clenchement du workflow √† chaque push
permissions: # Permissions minimales n√©cessaires au workflow
  contents: write # Autorise l'√©criture sur le d√©p√¥t (push vers gh-pages)
jobs: # D√©claration des jobs du workflow
  build-and-deploy: # Job unique pour construire et d√©ployer
    concurrency: ci-${{ github.ref }}  # √âvite les ex√©cutions concurrentes sur la m√™me ref
    runs-on: ubuntu-latest # VM GitHub h√©berg√©e
    steps: # Liste des √©tapes du job
      - name: Checkout üõéÔ∏è # R√©cup√®re le code du d√©p√¥t
        uses: actions/checkout@v4 # Action officielle pour cloner le d√©p√¥t

      # √âtape suivante: installation des d√©pendances et build
      - name: Install and Build  # Installe les d√©pendances et construit l'application
        run: | # Ex√©cute un script multi-lignes
          npm ci # Installe les d√©pendances en mode CI (rapide et reproductible)
          npm run build # Construit l'application (g√©n√®re le dossier build/)

      # D√©ploiement sur GitHub Pages
      - name: Deploy üöÄ # D√©ploie la build sur GitHub Pages
        uses: JamesIves/github-pages-deploy-action@v4 # Action de d√©ploiement vers gh-pages
        with: # Param√®tres de l'action de d√©ploiement
          folder: build # Dossier √† publier sur la branche gh-pages